<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="bootstrap/js/bootstrap.js"></script>
    <script src="bootstrap/tagsinput/bootstrap-tagsinput.js"></script>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB9JJKEbOztuSVauWEU58UeQJWtuzip2eU&sensor=false"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markermanager/src/markermanager.js"></script>
    <script>
        var map;
        var mycenter;
        var boards = [];
        var markers;
        var infowindow;
        function initialize(){
            var map_property = {
                center: new google.maps.LatLng(51.508742,-0.120850),
                zoom: 5,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById('map-canvas'),map_property);
            getLocation();
           /* $.each(markers,function(index,marker){
                google.maps.event.addListener(marker,'click',function(){
                    infowindow = new google.maps.InfoWindow({
                        content: location.lat
                    });
                });
            });*/

        }
        function getLocation(){
            markers = new MarkerManager(map);
            $.getJSON('/board/public',function(publicBoards){
                $.each(publicBoards,function(index,board){
                    if(board.locationlat && board.locationlng){
                        boards.push(board);
                        marker = new google.maps.Marker({
                            type:'Feature',
                            position: new google.maps.LatLng(board.locationlat,board.locationlng),
                            map: map,
                            'result':[{"address_components":[{
                                'title':board.name,
                                'boardIndex':index,
                                'description':board.category,
                                'icon':{
                                    'size':new google.maps.Size(32,32),
                                    'color':'522'
                                }

                            }]
                            }]

                        });
                        markers.addMarker(marker);
//                        markers.addMarker(new openLayers.marker(markerslonlat))
                    }
                });
                markers.refresh();
                try{
                    markers.setMap(map);
                }catch (e){}
            });
        }
        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
    <script>
        $(document).ready(function(){
            $('input').tagsinput({
                typeahead:{
                    source:function(query){
                        return $.getJSON('/boards/name');
                    }
                }
            });
        });
    </script>
</head>
<body>
<div>
    <input type="text"/>
</div>
<div id="map-canvas" style="width:500px;height:380px;"></div>
</body>
</html>